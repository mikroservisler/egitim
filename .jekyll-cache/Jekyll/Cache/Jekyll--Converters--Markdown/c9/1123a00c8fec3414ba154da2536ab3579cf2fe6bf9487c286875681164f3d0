I"©<h1 id="helm">helm</h1>

<p>Bir k8s uygulama kÃ¼mesinin (deployment, service, configmap, secrets, ingress â€¦ birlikte) kolayca yÃ¶netilebilmesi ve bir bÃ¼tÃ¼n olarak taÅŸÄ±nabilmesi iÃ§in Ã¼retilmiÅŸ bir yapÄ±landÄ±rma paket yÃ¶netimidir.</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="c"># Script olarak kurulum, istenirse daÄŸÄ±tÄ±mlarÄ±n depolarÄ±ndan da kurulabilir. </span>
curl https://raw.githubusercontent.com/helm/helm/master/scripts/get-helm-3 | bash

helm version <span class="nt">--short</span>

</code></pre></div></div>

<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="go">
helm repo add stable https://kubernetes-charts.storage.googleapis.com/

</span><span class="gp">#</span><span class="w"> </span>helm aktif durumunu Ã§evresel deÄŸiÅŸken olarak saklar. 
<span class="go">helm env

</span></code></pre></div></div>

<p>Helm komutu varsayÄ±lan olarak kubectl yapÄ±landÄ±rmasÄ±nÄ± kullanÄ±r.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code># helm repolarÄ± gÃ¶relim.
helm repo list

# redis hub sunan helm chars listesi
helm search hub redis

# redis sunan repositoryler. 
helm search repo redis

# redis chart tanÄ±mÄ±
helm show chart stable/redis

# redis readme dosyasÄ±
helm show readme stable/redis

helm install &lt;kurulum_adi&gt; stable/postgresql

</code></pre></div></div>

<p>Helm ile kendi chartlarÄ±mÄ±zÄ± oluÅŸturmak</p>

<p>Bir chart, values.yaml dosyasÄ± iÃ§erisinde tanÄ±mlanmÄ±ÅŸ deÄŸerler iÃ§in bir templateler bÃ¼tÃ¼nÃ¼dÃ¼r. Bu dosyaya deÄŸerler atanarak templateler gÃ¼ncellenir.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>helm create ilk-app

</code></pre></div></div>

<p>Bunun sonucunda aÅŸaÄŸÄ±daki dizin oluÅŸur ve tÃ¼m olasÄ± template alanlarÄ± oluÅŸturulur.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>tree ilk-app
ilk-app
â”œâ”€â”€ charts
â”œâ”€â”€ Chart.yaml
â”œâ”€â”€ templates
â”‚   â”œâ”€â”€ deployment.yaml
â”‚   â”œâ”€â”€ _helpers.tpl
â”‚   â”œâ”€â”€ hpa.yaml
â”‚   â”œâ”€â”€ ingress.yaml
â”‚   â”œâ”€â”€ NOTES.txt
â”‚   â”œâ”€â”€ serviceaccount.yaml
â”‚   â”œâ”€â”€ service.yaml
â”‚   â””â”€â”€ tests
â”‚       â””â”€â”€ test-connection.yaml
â””â”€â”€ values.yaml

3 directories, 10 files
</code></pre></div></div>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>cat ilk-app/Chart.yaml | grep -v "^#"
apiVersion: v2
name: ilk-app
description: A Helm chart for Kubernetes
type: application
version: 0.1.0
appVersion: 1.16.0

</code></pre></div></div>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
 <span class="na">spec</span><span class="pi">:</span> 
  <span class="na">replicas</span><span class="pi">:</span> <span class="pi">{{</span> <span class="nv">.Values.replicaCount</span> <span class="pi">}}</span>


<span class="c1">#values.yaml iÃ§erisinde tanÄ±mlanÄ±r.</span>

<span class="na">replicaCount</span><span class="pi">:</span> <span class="m">3</span>
</code></pre></div></div>

<p>AyrÄ±ca komut satÄ±rÄ±n bu deÄŸer aÅŸaÄŸÄ±daki gibi de girilebilir.</p>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="nn">...</span> <span class="s">--set replicaCount=3</span>

</code></pre></div></div>

<p>values.yaml dosyasÄ±nda neler var gÃ¶rmek iÃ§in</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c">#helm char dizininde</span>
helm inspect values <span class="nb">.</span>
</code></pre></div></div>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code># Birden Ã§ok values dosyasÄ± kullanabilirsiniz. Sonra gelen Ã¶nceliklidir. 
helm install -f myvalues.yaml -f override.yaml  myredis ./redis

</code></pre></div></div>

<h3 id="kaynaklar">Kaynaklar</h3>
<ul>
  <li>https://helm.sh/</li>
  <li>https://helm.sh/docs/chart_best_practices/</li>
  <li>https://www.youtube.com/watch?v=3GPpm2nZb2s</li>
</ul>
:ET